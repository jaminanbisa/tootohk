jQuery(document).ready(function(e){e(document).on("keydown",".ppc-add-custom-row-body input[type='text']",function(e){return 13!==e.keyCode}),e(document).on("click",".ppc-feature-gutenberg-new-submit, .ppc-feature-classic-new-submit",function(t){t.preventDefault();var a,s,r,c=e(this);e(".ppc-feature-submit-form-error").remove(),c.attr("disabled",!0),e(".ppc-feature-post-loader").addClass("is-active"),c.hasClass("ppc-feature-gutenberg-new-submit")?(a="ppc_submit_feature_gutenberg_by_ajax",s=c.closest(".ppc-add-custom-row-body").find(".ppc-feature-gutenberg-new-name").val(),r=c.closest(".ppc-add-custom-row-body").find(".ppc-feature-gutenberg-new-ids").val()):(a="ppc_submit_feature_classic_by_ajax",s=c.closest(".ppc-add-custom-row-body").find(".ppc-feature-classic-new-name").val(),r=c.closest(".ppc-add-custom-row-body").find(".ppc-feature-classic-new-ids").val());var o={action:a,security:c.closest(".ppc-add-custom-row-body").find(".ppc-feature-submit-form-nonce").val(),custom_label:s,custom_element:r};e.post(ajaxurl,o,function(t){var a,s,r,o,n;"error"==t.status?(c.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:red;">'+t.message+"</div>"),e(".ppc-feature-submit-form-error").delay(2e3).fadeOut("slow")):(e(".ppc-editor-features-submit").attr("disabled",!1),e(".ppc-save-button-warning").remove(),c.hasClass("ppc-feature-gutenberg-new-submit")?(n=".editor-features-gutenberg",e(".ppc-feature-gutenberg-new-name").val(""),e(".ppc-feature-gutenberg-new-ids").val("")):(n=".editor-features-classic",e(".ppc-feature-classic-new-name").val(""),e(".ppc-feature-classic-new-ids").val("")),c.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:green;">'+t.message+"</div>"),e(".ppc-feature-submit-form-error").delay(5e3).fadeOut("slow"),setTimeout(function(){e(".ppc-menu-overlay-item").removeClass("ppc-menu-overlay-item")},5e3),e(n).each(function(){a=e(this),r=a.attr("data-post_type"),o=e(".ppc-capabilities-tab-active").attr("data-slug")===r?"checked":"",s='<tr class="ppc-menu-row parent-menu ppc-menu-overlay-item"><td class="menu-column ppc-menu-item"><span class="gutenberg menu-item-link"><strong><i class="dashicons dashicons-arrow-right"></i>'+t.content.custom_label+' <small class="entry">('+t.content.custom_element+')</small> &nbsp; <span class="ppc-custom-features-delete" data-id="'+t.content.element_id+'" data-parent="'+t.content.data_parent+'"><small>('+t.content.delete_text+')</small></span></strong></span></td><td class="restrict-column ppc-menu-checkbox"><input id="check-item-'+r+"-"+t.content.element_id+'" class="check-item" type="checkbox" name="'+t.content.data_name_prefix+r+'[]" value="'+t.content.element_id+'" '+o+" /></td></tr>",a.find("tr:last").after(s)}));e(".ppc-feature-post-loader").removeClass("is-active"),c.attr("disabled",!1)})}),e(document).on("click",".ppc-custom-features-delete",function(t){if(confirm(cmeAdmin.deleteWarning)){var a=e(this),s=a.attr("data-id"),r=a.attr("data-parent"),c=e(".ppc-feature-submit-form-nonce").val();e("span[data-id='"+s+"']").each(function(){e(this).closest(".ppc-menu-row").fadeOut(300)});var o={action:"ppc_delete_custom_post_features_by_ajax",security:c,delete_id:s,delete_parent:r};e.post(ajaxurl,o,function(t){"error"==t.status&&(e("span[data-id='"+s+"']").each(function(){e(this).closest(".ppc-menu-row").show()}),alert(t.message))})}}),e(document).on("keyup paste",".ppc-add-custom-row-body input, .ppc-add-custom-row-body textarea",function(t){var a=!1;e(".ppc-save-button-warning").remove(),e(".ppc-add-custom-row-body .left input, .ppc-add-custom-row-body .right textarea").each(function(){""!==e(this).val()&&e(this).val().replace(/\s/g,"").length&&(a=!0)}),a?e(this).closest("form").find("input[type=submit]").attr("disabled",!0).after('<span class="ppc-save-button-warning">'+cmeAdmin.saveWarning+"</span>"):e(this).closest("form").find("input[type=submit]").attr("disabled",!1)}),e(document).on("click",".ppc-feature-css-hide-new-submit",function(t){t.preventDefault();custom_label=e(".ppc-feature-css-hide-new-name").val(),custom_element=e(".ppc-feature-css-hide-new-element").val(),security=e(".ppc-feature-submit-form-nonce").val(),button=e(this),e(".ppc-feature-submit-form-error").remove(),button.attr("disabled",!0),e(".ppc-feature-post-loader").addClass("is-active");var a={action:"ppc_submit_feature_css_hide_by_ajax",security:security,custom_label:custom_label,custom_element:custom_element};e.post(ajaxurl,a,function(t){if("error"==t.status)button.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:red;">'+t.message+"</div>"),e(".ppc-feature-submit-form-error").delay(2e3).fadeOut("slow");else{var a=e(".parent-menu.hidecsselement"),s=e(".child-menu.hidecsselement");e(".ppc-save-button-warning").remove(),e(".ppc-feature-css-hide-new-name").val(""),e(".ppc-feature-css-hide-new-element").val(""),button.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:green;">'+t.message+"</div>"),e(".ppc-feature-submit-form-error").delay(5e3).fadeOut("slow"),setTimeout(function(){e(".ppc-menu-overlay-item").removeClass("ppc-menu-overlay-item")},5e3),s.length>0?e(".child-menu.hidecsselement:last").after(t.content):a.after(t.content)}button.closest("form").find("input[type=submit]").attr("disabled",!1),e(".ppc-feature-post-loader").removeClass("is-active"),button.attr("disabled",!1)})}),e(document).on("click",".ppc-custom-features-css-delete",function(t){if(confirm(cmeAdmin.deleteWarning)){var a=e(this),s=a.attr("data-id"),r=e(".ppc-feature-submit-form-nonce").val();a.closest(".ppc-menu-row").fadeOut(300);var c={action:"ppc_delete_feature_css_hide_item_by_ajax",security:r,delete_id:s};e.post(ajaxurl,c,function(e){"error"==e.status&&(a.closest(".ppc-menu-row").show(),alert(e.message))})}}),e(document).on("click",".ppc-feature-block-url-new-submit",function(t){t.preventDefault();custom_label=e(".ppc-feature-block-url-new-name").val(),custom_link=e(".ppc-feature-block-url-new-link").val(),security=e(".ppc-feature-submit-form-nonce").val(),button=e(this),e(".ppc-feature-submit-form-error").remove(),button.attr("disabled",!0),e(".ppc-feature-post-loader").addClass("is-active");var a={action:"ppc_submit_feature_blocked_url_by_ajax",security:security,custom_label:custom_label,custom_link:custom_link};e.post(ajaxurl,a,function(t){if("error"==t.status)button.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:red;">'+t.message+"</div>"),e(".ppc-feature-submit-form-error").delay(2e3).fadeOut("slow");else{var a=e(".parent-menu.blockedbyurl"),s=e(".child-menu.blockedbyurl");e(".ppc-save-button-warning").remove(),e(".ppc-feature-block-url-new-name").val(""),e(".ppc-feature-block-url-new-link").val(""),button.closest("tr").find(".ppc-post-features-note").html('<div class="ppc-feature-submit-form-error" style="color:green;">'+t.message+"</div>"),e(".ppc-feature-submit-form-error").delay(5e3).fadeOut("slow"),setTimeout(function(){e(".ppc-menu-overlay-item").removeClass("ppc-menu-overlay-item")},5e3),s.length>0?e(".child-menu.blockedbyurl:last").after(t.content):a.after(t.content)}button.closest("form").find("input[type=submit]").attr("disabled",!1),e(".ppc-feature-post-loader").removeClass("is-active"),button.attr("disabled",!1)})}),e(document).on("click",".ppc-custom-features-url-delete",function(t){if(confirm(cmeAdmin.deleteWarning)){var a=e(this),s=a.attr("data-id"),r=e(".ppc-feature-submit-form-nonce").val();a.closest(".ppc-menu-row").fadeOut(300);var c={action:"ppc_delete_feature_blocked_url_item_by_ajax",security:r,delete_id:s};e.post(ajaxurl,c,function(e){"error"==e.status&&(a.closest(".ppc-menu-row").show(),alert(e.message))})}})});